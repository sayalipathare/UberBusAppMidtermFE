{"version":3,"file":"Day.js","sources":["../src/views/Calendar/Day.tsx"],"sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport ButtonBase, { ButtonBaseProps } from '@material-ui/core/ButtonBase';\nimport { makeStyles, fade } from '@material-ui/core/styles';\nimport { ExtendMui } from '../../typings/helpers';\nimport { onSpaceOrEnter } from '../../_helpers/utils';\nimport { useUtils } from '../../_shared/hooks/useUtils';\nimport { DAY_SIZE, DAY_MARGIN } from '../../constants/dimensions';\nimport { withDefaultProps } from '../../_shared/withDefaultProps';\nimport { useCanAutoFocus } from '../../_shared/hooks/useCanAutoFocus';\nimport { PickerSelectionState } from '../../_shared/hooks/usePickerState';\n\nconst muiComponentConfig = { name: 'MuiPickersDay' };\n\nexport const useStyles = makeStyles(\n  (theme) => ({\n    root: {\n      ...theme.typography.caption,\n      width: DAY_SIZE,\n      height: DAY_SIZE,\n      borderRadius: '50%',\n      padding: 0,\n      // background required here to prevent collides with the other days when animating with transition group\n      backgroundColor: theme.palette.background.paper,\n      color: theme.palette.text.primary,\n      '&:hover': {\n        backgroundColor: fade(theme.palette.action.active, theme.palette.action.hoverOpacity),\n      },\n      '&:focus': {\n        backgroundColor: fade(theme.palette.action.active, theme.palette.action.hoverOpacity),\n        '&$selected': {\n          willChange: 'background-color',\n          backgroundColor: theme.palette.primary.dark,\n        },\n      },\n      '&$selected': {\n        color: theme.palette.primary.contrastText,\n        backgroundColor: theme.palette.primary.main,\n        fontWeight: theme.typography.fontWeightMedium,\n        transition: theme.transitions.create('background-color', {\n          duration: theme.transitions.duration.short,\n        }),\n        '&:hover': {\n          willChange: 'background-color',\n          backgroundColor: theme.palette.primary.dark,\n        },\n      },\n      '&$disabled': {\n        color: theme.palette.text.secondary,\n      },\n    },\n    dayWithMargin: {\n      margin: `0 ${DAY_MARGIN}px`,\n    },\n    dayOutsideMonth: {\n      color: theme.palette.text.secondary,\n    },\n    hiddenDaySpacingFiller: {\n      visibility: 'hidden',\n    },\n    today: {\n      '&:not($selected)': {\n        border: `1px solid ${theme.palette.text.secondary}`,\n      },\n    },\n    dayLabel: {\n      // need for overrides\n    },\n    selected: {},\n    disabled: {},\n  }),\n  muiComponentConfig\n);\n\nexport interface DayProps extends ExtendMui<ButtonBaseProps> {\n  /**\n   * The date to show.\n   */\n  day: unknown;\n  /**\n   * Is focused by keyboard navigation.\n   */\n  focused?: boolean;\n  /**\n   * Can be focused by tabbing in.\n   */\n  focusable?: boolean;\n  /**\n   * Is day in current month.\n   */\n  inCurrentMonth: boolean;\n  /**\n   * Is switching month animation going on right now.\n   */\n  isAnimating?: boolean;\n  /**\n   * Is today?\n   */\n  today?: boolean;\n  /**\n   * Disabled?.\n   */\n  disabled?: boolean;\n  /**\n   * Selected?\n   */\n  selected?: boolean;\n  /**\n   * Is keyboard control and focus management enabled.\n   */\n  allowKeyboardControl?: boolean;\n  /**\n   * Disable margin between days, useful for displaying range of days.\n   */\n  disableMargin?: boolean;\n  /**\n   * Display disabled dates outside the current month.\n   *\n   * @default false\n   */\n  showDaysOutsideCurrentMonth?: boolean;\n  /**\n   * Disable highlighting today date with a circle.\n   *\n   * @default false\n   */\n  disableHighlightToday?: boolean;\n  /**\n   * Allow selecting the same date (fire onChange even if same date is selected).\n   *\n   * @default false\n   */\n  allowSameDateSelection?: boolean;\n  onDayFocus: (day: unknown) => void;\n  onDaySelect: (day: unknown, isFinish: PickerSelectionState) => void;\n}\n\nconst PureDay: React.FC<DayProps> = (props) => {\n  const {\n    allowKeyboardControl,\n    allowSameDateSelection = false,\n    className,\n    day,\n    disabled = false,\n    disableHighlightToday = false,\n    disableMargin = false,\n    focusable = false,\n    focused = false,\n    hidden,\n    inCurrentMonth: isInCurrentMonth,\n    isAnimating,\n    onClick,\n    onDayFocus,\n    onDaySelect,\n    onFocus,\n    onKeyDown,\n    selected = false,\n    showDaysOutsideCurrentMonth = false,\n    today: isToday = false,\n    ...other\n  } = props;\n  const utils = useUtils();\n  const classes = useStyles();\n  const canAutoFocus = useCanAutoFocus();\n  const ref = React.useRef<HTMLButtonElement>(null);\n\n  React.useEffect(() => {\n    if (\n      focused &&\n      !disabled &&\n      !isAnimating &&\n      isInCurrentMonth &&\n      ref.current &&\n      allowKeyboardControl &&\n      canAutoFocus\n    ) {\n      ref.current.focus();\n    }\n  }, [allowKeyboardControl, canAutoFocus, disabled, focused, isAnimating, isInCurrentMonth]);\n\n  const handleFocus = (event: React.FocusEvent<HTMLButtonElement>) => {\n    if (!focused) {\n      onDayFocus(day);\n    }\n\n    if (onFocus) {\n      onFocus(event);\n    }\n  };\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    if (!allowSameDateSelection && selected) return;\n\n    if (!disabled) {\n      onDaySelect(day, 'finish');\n    }\n\n    if (onClick) {\n      onClick(event);\n    }\n  };\n\n  const handleKeyDown = onSpaceOrEnter(() => {\n    if (!disabled) {\n      onDaySelect(day, 'finish');\n    }\n  }, onKeyDown);\n\n  const dayClassName = clsx(\n    classes.root,\n    {\n      [classes.selected]: selected,\n      [classes.dayWithMargin]: !disableMargin,\n      [classes.today]: !disableHighlightToday && isToday,\n      [classes.dayOutsideMonth]: !isInCurrentMonth && showDaysOutsideCurrentMonth,\n    },\n    className\n  );\n\n  if (!isInCurrentMonth && !showDaysOutsideCurrentMonth) {\n    // Do not render button and not attach any listeners for empty days\n    return <div aria-hidden className={clsx(dayClassName, classes.hiddenDaySpacingFiller)} />;\n  }\n\n  return (\n    <ButtonBase\n      ref={ref}\n      centerRipple\n      data-mui-test=\"day\"\n      disabled={disabled}\n      aria-label={utils.format(day, 'fullDate')}\n      tabIndex={focused || focusable ? 0 : -1}\n      className={dayClassName}\n      {...other}\n      onFocus={handleFocus}\n      onKeyDown={handleKeyDown}\n      onClick={handleClick}\n    >\n      <span className={classes.dayLabel}>{utils.format(day, 'dayOfMonth')}</span>\n    </ButtonBase>\n  );\n};\n\nexport const areDayPropsEqual = (prevProps: DayProps, nextProps: DayProps) => {\n  return (\n    prevProps.focused === nextProps.focused &&\n    prevProps.focusable === nextProps.focusable &&\n    prevProps.isAnimating === nextProps.isAnimating &&\n    prevProps.today === nextProps.today &&\n    prevProps.disabled === nextProps.disabled &&\n    prevProps.selected === nextProps.selected &&\n    prevProps.allowKeyboardControl === nextProps.allowKeyboardControl &&\n    prevProps.disableMargin === nextProps.disableMargin &&\n    prevProps.showDaysOutsideCurrentMonth === nextProps.showDaysOutsideCurrentMonth &&\n    prevProps.disableHighlightToday === nextProps.disableHighlightToday &&\n    prevProps.className === nextProps.className &&\n    prevProps.inCurrentMonth === nextProps.inCurrentMonth &&\n    prevProps.onDayFocus === nextProps.onDayFocus &&\n    prevProps.onDaySelect === nextProps.onDaySelect\n  );\n};\n\nPureDay.displayName = 'PickersDay';\n\nPureDay.propTypes = {\n  disabled: PropTypes.bool,\n  selected: PropTypes.bool,\n  today: PropTypes.bool,\n};\n\nexport const Day = withDefaultProps(muiComponentConfig, React.memo(PureDay, areDayPropsEqual));\n"],"names":["muiComponentConfig","name","useStyles","makeStyles","theme","root","typography","caption","width","DAY_SIZE","height","borderRadius","padding","backgroundColor","palette","background","paper","color","text","primary","fade","action","active","hoverOpacity","willChange","dark","contrastText","main","fontWeight","fontWeightMedium","transition","transitions","create","duration","secondary","dayWithMargin","margin","DAY_MARGIN","dayOutsideMonth","hiddenDaySpacingFiller","visibility","today","border","dayLabel","selected","disabled","PureDay","props","allowKeyboardControl","allowSameDateSelection","className","day","disableHighlightToday","disableMargin","focusable","focused","hidden","isInCurrentMonth","inCurrentMonth","isAnimating","onClick","onDayFocus","onDaySelect","onFocus","onKeyDown","showDaysOutsideCurrentMonth","isToday","other","utils","useUtils","classes","canAutoFocus","useCanAutoFocus","ref","React","current","focus","handleFocus","event","handleClick","handleKeyDown","onSpaceOrEnter","dayClassName","clsx","React.createElement","format","areDayPropsEqual","prevProps","nextProps","displayName","propTypes","PropTypes","Day","withDefaultProps"],"mappings":"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"}